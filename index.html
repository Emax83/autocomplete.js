<!doctype html>
<html lang="it">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="autocomplete.css">
    
    <title>Test Autocomplete</title>    

</head>
<body>
    <div style="max-width:640px; margin:auto">
        
        <h1>Auto complete</h1>

        <p>Start typing:</p>

        <!--Make sure the form has the autocomplete function switched off:-->
        <form autocomplete="off" action="#">

            <div class="form-group">
                <label>HTML5 autocomplete using datalist as source</label>
                <input id="Country1" type="text" name="Country1" placeholder="Country" class="form-control" list="countries1">
                <datalist class="autocomplete-list" id="countries1">
                    <option value="Italia">Italia</option>
                    <option value="Israele">Israele</option>
                    <option value="Israeliani">Israeliani</option>
                    <option value="Israeliti">Israeliti</option>
                    <option value="Francia">Francia</option>
                    <option value="Germania">Germania</option>
                    <option value="Spagna">Spagna</option>
                    <option value="Olanda">Olanda</option>
                </datalist>

            </div>


            <div class="form-group">
                <label>Using datalist as source with autocomplete.js</label>
                <input id="Country2" type="text" autocomplete="off" name="Country" placeholder="Country" class="form-control autocomplete" data-list="#countries">
                <datalist class="autocomplete-list" id="countries">
                    <option value="Italia">Italia</option>
                    <option value="Israele">Israele</option>
                    <option value="Israeliani">Israeliani</option>
                    <option value="Israeliti">Israeliti</option>
                    <option value="Francia">Francia</option>
                    <option value="Germania">Germania</option>
                    <option value="Spagna">Spagna</option>
                    <option value="Olanda">Olanda</option>
                </datalist>
            </div>


            <div class="form-group">
                <label>Using string list as source with autocomplete.js</label>
                <input id="Country3" type="text" autocomplete="off" name="Country3" placeholder="Country" class="form-control autocomplete" data-list="Italia,Germania,Spagna,Francia,Portogallo,Svizzera" />
            </div>


            <div class="form-group">
                <label>Using json as source with autocomplete.js</label>
                <input id="Country4" type="text" autocomplete="off" name="Country4" placeholder="Country" class="form-control autocomplete" data-list="GetCountries" />
            </div>

        </form>



    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="autocomplete.js"></script>
    <script>


        
function handleAutoCompletes() {
    try {
        if ($) {

            $("input.autocomplete").autocomplete({
                //list: [{value:1,text:'Text 1'}, {value:2, text: 'Text 2'}], //provided list, if not, retrieved automatically
                //strict: true,  //true= accept only item from list; false = only suggest, accept everything
                //valueField: "value",  
                //textField: "text",
                //minLen: 3, //minimum character typed to start autocomplete
                errorClass: "input-validation-error",  //error class for input field applied if no item selected
                className: "list-group",  //class applied to autocomplete div container
                itemClassName: "list-group-item", //class applied to autocomplete item
                selectedItemClassName: "active",  //class applied to autocomplete selected item
                init: function () {  //optional function called after initialization if you want to retrieve list from ajax or else
                    //initialized control.
                    console.log("Initialized");
                },
                onSelect: function (selected, input, targetSelection) {  //optional function called after item selection
                    $(targetSelection).val(selected.value);
                    console.log("Selected item: " + selected);
                    //input.value = item;
                },
            });


        } //if ($)
        else {
            console.error("jQuery not found");
        }
    }
    catch (err) {
        console.error("handleAutoCompletes; Error: " + err.message);
    }
        }

        function GetCountries(list) {
        //simulate ajax call

            setTimeout(function () {
                list.push('Italia');
                list.push('Francia');
                list.push('Germania');
                list.push('Spagna');
                list.push('Portogallo');
                list.push('Svizzera');
                list.push('...');
            }, 2000);
        }
        
        handleAutoCompletes();


    </script>


</body>
</html>
